$def with(review)

<a href="/">Return to list</a>

<h1>Review: $review.name</h1>

<div class="diff">
$for file in review.parsed_diff().files:
    <div class="file">
        <div class="file-header">$file.old</div>
    $for line in file.lines:
        <div class="line-$line.type_">
            <div class="margin">
                <div id="line-margin-$line.number" class="margin-content" style="display: none;">
                    <img border="0" src="/static/images/comment.png">
                </div>
            </div>
            <pre>$line.content</pre>
        </div>
    </div>
</div>


<ul>
$for comment in review.comments:
    <li>$comment.text (by <b>$comment.user</b> at $comment.date)</li>
</ul>

<form action="/review/$review.id_/add_comment" method="post">
    Your name: <input type="text" name="author" /><br />
    <textarea name="comment"></textarea>
    <input type="submit" value="Send" />
</form>

<script type="text/javascript">
$$(document).ready(function () {
    CommentLoader.load($review.id_);
});
</script>
